<?xml version="1.0" encoding="UTF-8"?>
<!-- 
 * Copyright (C) 2016 VNG/KING
 * 
 * This file is part of Imvertor.
 *
 * Imvertor is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Imvertor is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Imvertor.  If not, see <http://www.gnu.org/licenses/>.
-->
<config>
   <id>
      <name>Regression extractor</name>
      <version-control>$Id: parms.xml 7475 2016-03-23 10:54:06Z arjan $</version-control>
   </id>
   <cli-parms>
      <cli-parm>
         <name>arguments</name>
         <arg>filepath</arg>
         <tip>Path to the file holding (additional) arguments (in the form key = value)</tip>
         <default><!--none--></default>
         <type>file</type>
      </cli-parm> 
      
      <!-- specifiek voor deze chain -->
      
      <!-- deze parameter hebben betrekking op de bulk regression test -->
      <cli-parm>
         <name>regowner</name>
         <arg>names</arg>
         <tip>Names of the owners for which to perform the regression test. Separate by semicolon.</tip>
         <default><!--none--></default>
      </cli-parm> 
      
      <!-- deze parameter hebben betrekking op regression test uitgevoerd op één specifiek model -->
      <cli-parm>
         <name>reffolder</name>
         <arg>path</arg>
         <tip>Full path to the folder that holds the reference Imvertor files</tip>
         <default>/no_reffolder</default>
      </cli-parm> 
      <cli-parm>
         <name>tstfolder</name>
         <arg>path</arg>
         <tip>Full path to the folder that holds the Imvertor files to be tested</tip>
         <default>/no_path</default>
      </cli-parm> 
      <cli-parm>
         <name>outfolder</name>
         <arg>path</arg>
         <tip>Full path to the folder that will hold the report XML as generated by the regression test</tip>
         <default>/no_outfolder</default>
      </cli-parm> 
      
      <!-- dit zijn gemeenschappelijke parameters -->
      <cli-parm>
         <name>regression</name>
         <arg>yes|no</arg>
         <tip>Should a regression test be performed on the results of this run?</tip>
         <default>no</default>
      </cli-parm>
      <cli-parm>
         <name>regressionmethod</name>
         <arg>name</arg>
         <tip>Specify a name of a known compare method. Currently known methods are: "xmlunit" and "raw".</tip>
         <default>raw</default>
      </cli-parm>
      <cli-parm>
         <name>identifier</name>
         <arg>String</arg>
         <tip>A unique identifier for this application. The report is stored in the outfolder by this name. Typical use: the RUN ID.</tip>
         <default>no_identifier</default>
      </cli-parm> 
      <cli-parm>
         <name>maxreport</name>
         <arg>Integer</arg>
         <tip>Max number of differences reported.</tip>
         <default>100</default>
      </cli-parm> 
      <cli-parm>
         <name>rebuildref</name>
         <arg>yes|no</arg>
         <tip>Rebuild the reference content representation for every regression test.</tip>
         <default>no</default>
      </cli-parm> 
      
      <cli-parm>
         <name>debug</name>
         <arg>yes|no</arg>
         <tip>Yes if run in debug mode</tip>
         <default>no</default>
      </cli-parm> 
      
      
      <!-- TODO niet relevant, ander opzetten: -->
      <cli-parm>
         <name>owner</name>
         <arg>name</arg>
         <tip>Explain</tip>
         <required>true</required>
      </cli-parm>
      <cli-parm>
         <name>metamodel</name>
         <arg>name</arg>
         <tip>Explain</tip>
         <required>true</required>
      </cli-parm> 
      <cli-parm>
         <name>project</name>
         <arg>name</arg>
         <tip>Explain</tip>
         <required>true</required>
      </cli-parm> 
      <cli-parm>
         <name>application</name>
         <arg>name</arg>
         <tip>Explain</tip>
         <required>true</required>
      </cli-parm> 
      
      <!-- niet relevant; anders opzetten: -->
      <cli-parm>
         <name>task</name>
         <arg>compile</arg>
         <tip>Explain</tip>
         <required>true</required>
      </cli-parm> 
      <cli-parm>
         <name>forcecompile</name>
         <arg>false</arg>
         <tip>Explain</tip>
         <required>true</required>
      </cli-parm> 
      
   </cli-parms>
   
   <properties>
      
      <!-- 
         Path to the stylesheet to filter ANY xml file found in the folder.
         This XSL is generic, and therefore calls upon any imported XSL (or such) to process specific types of file.
         The root element of the file found is passed in a wrapper element:
         <cw:file type="xml" path="work\rep\XmiCompiler-report.xml" name="" ext="" date="" size="" attrib="">
      -->
      <REGRESSION_EXTRACT_XSLPATH>RegressionExtractor-extract.xsl</REGRESSION_EXTRACT_XSLPATH>
      <REGRESSION_EXTRACT_CANON_XSLPATH>RegressionExtractor-extract-canon.xsl</REGRESSION_EXTRACT_CANON_XSLPATH>
      
      
      
      
      
      
      
      
      <!--
         Where to store the xml files?
      -->
      <IMVERTOR_REGRESSION_EXTRACT_TARGET>${system/work-cmp-folder-path}/xml</IMVERTOR_REGRESSION_EXTRACT_TARGET>
      <!-- 
         stylesheet to process the __content.xml, extracted from the deserialized template
      -->
      <WORK_REGRESSION_EXTRACT_XSLPATH>RegressionExtractor-extract.xsl</WORK_REGRESSION_EXTRACT_XSLPATH>
      <!-- 
         path to temporary output of transforming __content.xml; this is not compressed back into the result Excel.
      -->
      <WORK_REGRESSION_EXTRACT_FILE>${system/work-imvert-folder-path}/imvertor.60.extractor.xml</WORK_REGRESSION_EXTRACT_FILE>
      <!-- 
         folder that stores the extracted template (serialized zip) 
       -->
      <WORK_REGRESSION_TEMPLATE_FOLDERPATH>${system/work-REGRESSION-folder-path}/template</WORK_REGRESSION_TEMPLATE_FOLDERPATH>
      
      <!-- == the following is simialr to compare in imvertor flow == -->
      
      <!-- 
          The XSLT which simplifies the model. 
          generates WORK_COMPARE_*_SIMPLE_FILE
         -->
      <IMVERTOR_COMPARE_LISTING_XSLPATH>${properties/IMVERTOR_COMPARE_FOLDER}/xsl/Imvert/Imvert2compare-listing.xsl</IMVERTOR_COMPARE_LISTING_XSLPATH>
      <!-- 
          the folder that holds the compare XSLTs 
      -->
      <IMVERTOR_COMPARE_FOLDER>${system/xsl-folder-path}/RegressionExtractor/compare</IMVERTOR_COMPARE_FOLDER>
      <!-- 
          the diff file is the Junit generated xml differencing output. 
        -->
      <WORK_COMPARE_DIFF_FILE>${system/work-imvert-folder-path}/compare.1.diff.xml</WORK_COMPARE_DIFF_FILE>
      <!-- 
          the listing file is the XML format that is suitable for processing by the compare reporter 
        -->
      <WORK_COMPARE_LISTING_FILE>${system/work-imvert-folder-path}/compare.2.listing.xml</WORK_COMPARE_LISTING_FILE>
      
      <COMPARE_GENERATOR_XSLPATH>${properties/IMVERTOR_COMPARE_FOLDER}/xsl/compare.generator.xsl</COMPARE_GENERATOR_XSLPATH>
      <!-- 
        The following path is the location of the generatd XSL for performing comparisons.
        It should be the location as defined in the xml.catalog, i.e.
        <uri name="http://www.imvertor.org/imvertor/1.0/xslt/compare/compare-generated.xsl" uri="(the COMPARE_GENERATED_XSLPATH)">
      -->
      <COMPARE_GENERATED_XSLPATH>${system/work-folder-path}/compare/generated.xsl</COMPARE_GENERATED_XSLPATH>
   </properties>
   
   <appinfo>
      <project-name>regression</project-name>
      <application-name>nightly</application-name>
   </appinfo>
</config>
